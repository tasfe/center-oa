/*
 * Compressed by JSA(www.xidea.org)
 */
function treeview(E,C,D,_){var B=this,A=null;this.nodes=new node("root","roottag").nodes;this.id=E?E:"";this.icon=true;this.selected=null;this.path=C?C:"";this.selected=null;this.dragTo=null;this.dragFrom=null;this.drag=_?true:false;this.check=D?true:false;var $={root:"root.gif",open:"open.gif",close:"close.gif",file:"file.gif",rplus:"rplus.gif",rminus:"rminus.gif",join:"t.gif",joinbottom:"l.gif",jointop:"r.gif",plus:"tplus.gif",plusbottom:"lplus.gif",minus:"tminus.gif",minusbottom:"lminus.gif",blank:"blank.gif",line:"i.gif"};this.Ficons={};for(i in $){this.Ficons[i]=new Image();this.Ficons[i].src=C+"/"+$[i]}this.create=function(_){if(_){for(var $=0;$<this.nodes.length;$++)_.appendChild(this.nodes.items[$].toString(B));A=_}};this.expandAll=function(){for(var $=0;$<this.nodes.length;$++)this.expandInner(this.nodes.items[$])};this.collapseAll=function(){for(var $=0;$<this.nodes.length;$++)this.collapseInner(this.nodes.items[$])};this.expandInner=function(_){_.expand();for(var $=0;$<_.nodes.length;$++){var A=_.nodes.items[$];A.expand();if(A.nodes&&A.nodes.length>0)this.expandInner(A)}};this.collapseInner=function(_){_.collapse();for(var $=0;$<_.nodes.length;$++){var A=_.nodes.items[$];A.collapse();if(A.nodes&&A.nodes.length>0)this.collapseInner(A)}};this.add=function($){this.insert(this.nodes.length,$)};this.insert=function($,_){if($>=0&&$<=this.nodes.length){var B=null;if($<this.nodes.length)B=this.nodes.items[$].baseNode;this.nodes.insert($,_);if(A)if($==this.nodes.length)A.appendChild(_.toString());else if(B)A.insertBefore(_.toString(),B)}}}treeview.prototype.onnodeclick=function($){return false};treeview.prototype.onnodeexpand=function($){};treeview.prototype.onnodecollapse=function($){};treeview.prototype.onnodedblclick=function($){$.toggle();return false};treeview.prototype.onnodeafteredit=function($,_){};treeview.prototype.onnodebeforeedit=function(_,A,$){};treeview.prototype.onnodedrag=function(_,$){};treeview.prototype.onnodekeydown=function($,_){var _=_||event;switch(_.keyCode){case 61:case 187:case 107:$.expand();break;case 109:case 189:$.collapse();break;case 38:if($.previous())$.previous().select();else if($.parent&&$.parent.level>=0)$.parent.select();break;case 40:if($.next())$.next().select();break;case 37:if($.parent&&$.parent.level>=0)$.parent.select();break;case 39:if($.firstChild())$.firstChild().select();else if($.next())$.next().select();break}};treeview.prototype.onnodemousedown=function($,_){};treeview.prototype.onnodemouseup=function($,_){};treeview.prototype.oncontextmenu=function($){};treeview.prototype.onnodecheck=function($){};treeview.prototype.onselectchange=function($,_){};function snode(A,C,B,_,$){return new node(A,"",_,$,null,null,C,B)}function node(A,$,I,_,H,G,J,E){var B=this;this.nodes=new D();this.caption=A;this.title=$?$:A;this.parent=null;this.tag=H?H:"";this.loaded=false;this.level=-1;this.isLast=false;this.action=I;this.target=_?_:"";this.opened=false;this.isRoot=J?J:false;this.showed=false;this.id=E;this.checked=false;this.indent=[];this.callback=G?G:null;this.callbackFlag=0;this.map={};var C=null;this.container=document.createElement("div");this.baseNode=null;this.handleNode=null;this.folderNode=null;this.textNode=null;this.checkNode=null;function F(){var _=Math.random()+"",B=Math.random()+"",A=Math.random()+"",$=Math.random()+"";return _.substr(2,8)+"-"+B.substr(2,8)+"-"+A.substr(2,8)+"-"+$.substr(2,8)}function D(){var $=[];this.length={valueOf:function(){return $.length},toString:function(){return $.length}};this.toString=function(){return $.toString()};this.insert=function(_,C){if(_>=0&&_<=$.length){var D=$.length;C.parent=B;C.level=B.level+1;if(_>=$.length){C.isLast=true;if($.length>0){$[$.length-1].isLast=false;$[$.length-1].setIndent($[$.length-1].level,$[$.length-1].isLast);$[$.length-1].refresh(0)}}else C.isLast=false;C.indent=B.indent.concat();C.indent[C.indent.length]=C.isLast;if(C.nodes.length>0)A(C);function A(_){for(var $=0;$<_.nodes.length;$++){_.nodes.items[$].indent=_.indent.concat();_.nodes.items[$].indent[_.nodes.items[$].indent.length]=_.nodes.items[$].isLast;if(_.nodes.items[$].nodes.length>0)arguments.callee(_.nodes.items[$])}}if(B.loaded)if(_==$.length)B.container.appendChild(C.toString());else{var E=$[_].baseNode;if(E)B.container.insertBefore(C.toString(),E)}$.splice(_,0,C);if(D==0)B.refresh(0)}return B};this.add=function(_){return this.insert($.length,_)};this.remove=function(A){if(A)for(var _=0;_<$.length;_++)if($[_]==A)this.removeAt(_)};this.removeAt=function(A){if(A>=0&&A<$.length){if(A>0&&A==$.length-1){$[A-1].isLast=true;$[A-1].setIndent($[A-1].level,$[A-1].isLast)}$[A].nodes.removeChildren();var C=$[A];if(C.showed){if(control)if(C==control.selected){if(A>0)control.selected=C.previous();else control.selected=C.next();if(!control.selected)if(C.parent.level>=0)control.selected=C.parent;if(control.selected)control.selected.select()}var D=C.baseNode;if(D)D.parentNode.removeChild(D)}$.splice(A,1);if($.length>0){var _=$[$.length-1];_.isLast=true;_.setIndent(_.level,_.isLast);if(_.showed)_.refresh(0)}else{B.loaded=false;B.opened=false;B.container.style.display="none";B.refresh(0)}}};this.removeChildren=function(){for(var A=$.length-1;A>=0;A--){var _=B.nodes.items[A];_.nodes.removeChildren();if(_.showed){if(control)if(_==control.selected)control.selected=this;var C=B.baseNode;if(C)C.parentNode.removeChild(C)}}$.length=0};this.items=$}this.add=function($){return this.nodes.add($)};this.setRoot=function($){this.isRoot=$};this.setMap=function($){this.map=$};this.invokeCall=function($,_){if(this.callbackFlag==0){this.callback.apply(null,[this,this.toggle]);this.callbackFlag=1;_.onclick=function(){$.toggle()}}else _.onclick=function(){$.toggle()}};this.getRoot=function(){return this.isRoot||this.nodes.length>0};this.setCallback=function($){this.callback=$};this.insert=function($,_){return this.nodes.insert($,_)};this.remove=function(){this.parent.nodes.remove(this)};this.setCaption=function($,_){if(this.showed){var A=this.textNode;if(A){A.firstChild.innerHTML=$;A.title=typeof(_)!="undefined"?_:$}}this.caption=$};this.deepth=function(){var $=-1,_=B;do{_=_.parent;$++}while(_!=null);return $};this.root=function(){var $=B;do if($.level>0)$=$.parent;else break;while($!=null);return $};this.toString=function(D){if(D)control=D;var H=document.createElement("div");if(B.id)H.id="tree_div_"+B.id;document.body.appendChild(H);H.className="Node";H.noWrap=true;H.onselectstart=function($){$=$||event;return typeof($.srcElement.type)!="undefined"&&$.srcElement.type=="text"};H.oncontextmenu=function($){return treeview.prototype.oncontextmenu(B)};for(var A=0;A<this.indent.length-1;A++){var $=document.createElement("img");$.align="absmiddle";$.src=this.indent[A]?control.Ficons.blank.src:control.Ficons.line.src;H.appendChild($)}var F=document.createElement("img");if(B.id)F.id="tree_hIcon_"+B.id;H.appendChild(F);F.align="absmiddle";var I=B.getRoot();F.src=I?(B.opened?(B.level>0?(B.isLast?control.Ficons.minusbottom.src:control.Ficons.minus.src):(B.isLast?control.Ficons.minusbottom.src:control.Ficons.rminus.src)):(B.level>0?(B.isLast?control.Ficons.plusbottom.src:control.Ficons.plus.src):(B.isLast?control.Ficons.plusbottom.src:control.Ficons.rplus.src))):(B.level>0?(B.isLast?control.Ficons.joinbottom.src:control.Ficons.join.src):B.isLast?control.Ficons.joinbottom.src:control.Ficons.join.src);if(B.callback)F.onclick=function(){B.invokeCall(B,F)};else F.onclick=function(){B.toggle()};var G=document.createElement("img");if(B.id)G.id="tree_fIcon_"+B.id;H.appendChild(G);G.align="absmiddle";G.src=B.icon?this.icon:(I?(B.opened?control.Ficons.open.src:control.Ficons.close.src):control.Ficons.file.src);G.onclick=function($){B.select();return treeview.prototype.onnodeclick(B)};G.ondblclick=function($){return treeview.prototype.onnodedblclick(B)};if(control&&control.check>0){var _=document.createElement("input");_.type="checkbox";_.value=B.id;_.name="tree_checkbox";_.checked=B.checked;_.onclick=function(){B.checked=!B.checked;treeview.prototype.onnodecheck(B)};H.appendChild(_);this.checkNode=_}var E=document.createElement("span");if(B.id)E.id="tree_span_"+B.id;H.appendChild(E);var C=document.createElement("a");if(B.id)C.id="tree_a_"+B.id;E.appendChild(C);C.innerHTML=B.caption?B.caption:"";C.target=B.target?B.target:"";C.href=B.action?B.action:"javascript:void(0)";C.onkeydown=function($){return treeview.prototype.onnodekeydown(B,$)};C.ondblclick=function($){return treeview.prototype.onnodedblclick(B)};C.onmousedown=function($){return treeview.prototype.onnodemousedown(B)};C.onmouseup=function($){return treeview.prototype.onnodemouseup(B)};if(C.href=="javascript:void(0)")C.onclick=function($){B.select();return treeview.prototype.onnodeclick(B)};C.onfocus=function(_){var $=null;if(control){$=control.selected;if(control.selected)control.selected.unselect();control.selected=B}if($!=B)treeview.prototype.onselectchange($,B);B.select()};C.ondragstart=function(_){if(control.drag){var $=window.event.dataTransfer;$.effectAllowed="move";$.dropEffect="none";control.dragFrom=B;control.dragTo=null}};C.ondragenter=function($){if(control.drag){control.dragTo=B;B.select()}};C.ondragend=function($){if(control.drag)if(control.dragFrom!=control.dragTo&&control.dragTo!=null)treeview.prototype.onnodedrag(control.dragFrom,control.dragTo)};E.className="Node-unselect";E.title=B.title;E.ondragover=function(_){if(control.drag){var $=window.event;$.returnValue=false}};B.container.style.display=B.opened?"":"none";H.appendChild(B.container);B.showed=true;this.baseNode=H;this.handleNode=F;this.folderNode=G;this.textNode=E;return H};this.edit=function(){if(control.selected!=this)this.select();this.textNode.style.display="none";this.textNode.style.className="Node-unselected";var _=this.baseNode,$=document.createElement("input");$.type="text";$.style.borderWidth="1px";$.style.width="80px";$.value=this.caption;_.insertBefore($,this.textNode);$.onblur=function(){if(this.value.length==0){$.focus();return false}var A=B.text,_=this.value;B.setCaption(this.value);this.parentNode.removeChild(this);B.textNode.style.display="";B.textNode.className="Node-selected";treeview.prototype.onnodeafteredit(this,A,_);B.select()};$.onkeypress=function(_){var _=_||event;if(_.keyCode==13)$.blur()};try{$.scrollIntoView(false)}catch(A){}$.select()};this.expand=function(){if(this.nodes.length>0)if(!this.opened){this.opened=true;if(!B.loaded){var $=B.parent;if($&&!$.opened&&$.level>=0)$.expand();this.refresh(1);this.loaded=true}else this.refresh(0);this.container.style.display="";treeview.prototype.onnodeexpand(this)}};this.collapse=function(){this.opened=false;treeview.prototype.onnodecollapse(this);this.container.style.display="none";this.refresh(0)};this.toggle=function(){if(this.nodes.length>0)if(!this.opened)this.expand();else this.collapse()};this.isParent=function($){var _=B.parent;while(_!=null){if(_==$)return true;_=_.parent}return false};this.setIndent=function($,B){this.indent[$]=B;for(var _=0;_<this.nodes.length;_++){this.nodes.items[_].indent[$]=B;if(this.nodes.items[_].showed){var A=this.nodes.items[_].baseNode.childNodes;for(var C=0;C<this.nodes.items[_].indent.length-1;C++)if(A[C].tagName=="IMG")A[C].src=this.nodes.items[_].indent[C]?control.Ficons.blank.src:control.Ficons.line.src}this.nodes.items[_].setIndent($,B)}};this.select=function(){if(this.parent)this.parent.expand();var _=this.textNode;if(_){_.className="Node-selected";var $=_.firstChild;try{$.focus()}catch(A){}}};this.unselect=function(){if(this.showed){var $=this.textNode;if($){$.className="Node-unselect";$.firstChild.blur()}}};this.refresh=function(_){if(this.showed){if(_)for(var $=0;$<this.nodes.length;$++){this.container.appendChild(this.nodes.items[$].toString());this.container.style.display=this.opened?"":"none"}if(this.handleNode)this.handleNode.src=B.nodes.length>0?(B.opened?(B.level>0?(B.isLast?control.Ficons.minusbottom.src:control.Ficons.minus.src):(B.isLast?control.Ficons.minusbottom.src:control.Ficons.rminus.src)):(B.level>0?(B.isLast?control.Ficons.plusbottom.src:control.Ficons.plus.src):(B.isLast?control.Ficons.plusbottom.src:control.Ficons.rplus.src))):(B.level>0?(B.isLast?control.Ficons.joinbottom.src:control.Ficons.join.src):B.isLast?control.Ficons.joinbottom.src:control.Ficons.join.src);if(this.folderNode)if(!this.icon)this.folderNode.src=this.nodes.length>0?(this.opened?control.Ficons.open.src:control.Ficons.close.src):control.Ficons.file.src}};this.moveToChild=function(_){if(_)if(this.isParent(_)==false){if(this.opened)this.expand();var $=_.clone();_.remove();this.add($)}};this.clone=function(){var $=new node(this.caption,this.title,this.url,this.target,this.tag);_(this,$);function _(B,A){for(var _=0;_<B.nodes.length;_++){var C=B.nodes.items[_],$=new node(C.caption,C.title,C.url,C.target,C.tag);$.loaded=false;A.add($);if(C.nodes.length)arguments.callee(C,$)}}return $};this.firstChild=function(){if(this.nodes.length>0)return this.nodes.items[0];else return null};this.lastChild=function(){if(this.nodes.length>0)return this.nodes.items[this.nodes.length-1];else return null};this.next=function(){var _=this.parent;for(var $=0;$<_.nodes.length;$++)if(_.nodes.items[$]==this)if($<_.nodes.length-1)return _.nodes.items[$+1];return null};this.previous=function(){var _=this.parent;for(var $=0;$<_.nodes.length;$++)if(_.nodes.items[$]==this)if($>0)return _.nodes.items[$-1];return null}}